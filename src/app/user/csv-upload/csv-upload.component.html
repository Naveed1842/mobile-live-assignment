<div class="container">
  <div class="card">
    <div class="card-header">Upload csv to read</div>
    <div class="card-body">
      <input
        type="file"
        #csvReader
        name="Upload CSV"
        id="txtFileUpload"
        (change)="uploadListener($event)"
        accept=".csv"
      />
    </div>
  </div>
  <div style="float: right;margin: 10px;">
    <a
    href="javascript:;"
    *ngIf="isValidRow.length > 0"
    (click)="uploadValidRecords()"
    class="btn btn-primary"
  >
    Submit Valid Record
  </a>
  <!-- <a
    href="javascript:;"
    *ngIf="isValidRow.length > 0"
    (click)="getJsonData()"
    class="btn btn-primary"
    >Convert Json
  </a>
   -->
  <a
    href="javascript:;"
    *ngIf="isValidRow.length > 0"
    (click)="fileReset()"
    class="btn btn-primary"
    >Reset
  </a>
  </div>
  {{ jsondatadisplay }}
  <table class="table" *ngIf="isValidRow.length > 0">
    <thead class="thead-dark">
      <tr>
        <th scope="col">#</th>
        <th scope="col">Amount</th>
        <th scope="col">Date</th>
        <th scope="col">Selling Score</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let record of isValidRow; let i = index">
        <th scope="row">
          {{ record.id }}
        </th>
        <td>{{ record.amount }}</td>
        <td>{{ record.date }}</td>
        <td>{{ record.score | number: "1.2-2" }}</td>
      </tr>
    </tbody>
  </table>

  <div class="container" *ngIf="isInValidRow.length > 0">
    
    <h6>CSV Instructions:</h6>
    <ul>
      <li>Id must be a Number</li>
      <li>Date format must be YYYY-MM-DD</li>
      <li>Amount must be number</li>
    </ul>
    <table
      class="table"
      *ngIf="isInValidRow.length > 0"
      style="background-color: red"
    >
      <thead class="thead-dark">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Amount</th>
          <th scope="col">Date</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let record of isInValidRow; let i = index">
          <th scope="row">
            {{ record.id }}
          </th>
          <td>{{ record.amount }}</td>
          <td>{{ record.date }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
